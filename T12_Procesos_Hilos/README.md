# Taller T12 - Procesos e Hilos en Sistemas Operativos

## üìã Descripci√≥n General

Este taller implementa tres programas en C para demostrar el uso y funcionamiento de procesos e hilos en Linux. El objetivo es comprender las diferencias entre estos dos mecanismos de concurrencia y su aplicaci√≥n pr√°ctica en el procesamiento paralelo de matrices.

## üéØ Objetivos del Taller

- Comprender el funcionamiento de procesos en Linux mediante `fork()`
- Implementar comunicaci√≥n entre procesos padre e hijos
- Utilizar llamadas al sistema `exec` para ejecutar programas
- Trabajar con hilos POSIX usando `pthread`
- Comparar el rendimiento y caracter√≠sticas entre procesos e hilos

## üìÅ Estructura del Proyecto

```
T12_Procesos_Hilos/
‚îÇ
‚îú‚îÄ‚îÄ Parte 1: matrizsum.c     # Programa principal con procesos (Parte 1)
‚îú‚îÄ‚îÄ Parte 1: ejecutor.c      # Programa que usa exec() (Parte 1)
‚îú‚îÄ‚îÄ Parte 2: matrizproc.c    # Programa con hilos pthread (Parte 2)
‚îú‚îÄ‚îÄ README.md                # Este archivo
‚îú‚îÄ‚îÄ GUIA_PRUEBAS.md         # Gu√≠a detallada de pruebas
‚îú‚îÄ‚îÄ INSTRUCCIONES_CAPTURAS.md # Instrucciones para capturas
‚îú‚îÄ‚îÄ ejecutar_pruebas.sh      # Script autom√°tico de pruebas
‚îú‚îÄ‚îÄ pruebas_rapidas.sh       # Script de verificaci√≥n r√°pida
‚îú‚îÄ‚îÄ matrizsum                # Ejecutable de matrizsum
‚îú‚îÄ‚îÄ ejecutor                 # Ejecutable de ejecutor
‚îú‚îÄ‚îÄ matrizproc               # Ejecutable de matrizproc
‚îî‚îÄ‚îÄ T12 Procesos e Hilos Sistemas Operativos.pdf  # Documento del taller
```

## üõ†Ô∏è Requisitos del Sistema

- **Sistema Operativo**: Linux (Ubuntu, Debian, Fedora, etc.)
- **Compilador**: GCC (GNU Compiler Collection)
- **Librer√≠as**: pthread (normalmente incluida en Linux)
- **Herramientas**: Terminal/Shell de Linux

### Instalaci√≥n de Requisitos (si es necesario)

```bash
# Ubuntu/Debian
sudo apt-get update
sudo apt-get install build-essential

# Fedora/RHEL
sudo dnf install gcc make

# Arch Linux
sudo pacman -S base-devel
```

## üìö Programas Implementados

### 1. matrizsum - Procesamiento con Procesos

**Descripci√≥n**: Programa que crea m√∫ltiples procesos hijos para sumar las filas de una matriz cuadrada.

**Caracter√≠sticas**:
- Recibe dos argumentos: tama√±o de matriz (m) y n√∫mero de procesos (n)
- Valida que n sea divisor de m
- Cada proceso hijo procesa m/n filas
- Muestra el PID de cada proceso y sus resultados

**Uso**:
```bash
./matrizsum <tama√±o_matriz> <numero_procesos>
```

**Ejemplo**:
```bash
./matrizsum 8 4   # Matriz 8x8 con 4 procesos
```

### 2. ejecutor - Llamada con exec()

**Descripci√≥n**: Programa que ejecuta `matrizsum` utilizando las llamadas al sistema de la familia `exec`.

**Caracter√≠sticas**:
- Crea un proceso hijo
- Usa `execl()` para ejecutar matrizsum
- Espera la finalizaci√≥n del programa ejecutado

**Uso**:
```bash
./ejecutor <tama√±o_matriz> <numero_procesos>
```

**Ejemplo**:
```bash
./ejecutor 6 3   # Ejecuta matrizsum con matriz 6x6 y 3 procesos
```

### 3. matrizproc - Procesamiento con Hilos

**Descripci√≥n**: Programa que usa hilos POSIX para procesar filas de una matriz, calculando suma o m√°ximo.

**Caracter√≠sticas**:
- Recibe tama√±o de matriz y tipo de operaci√≥n
- Crea p hilos (p = n√∫mero_de_grupo + 2)
- Soporta operaciones: "sumar" y "max"
- Distribuye equitativamente las filas entre hilos

**Uso**:
```bash
./matrizproc <tama√±o_matriz> <operacion>
```

**Ejemplos**:
```bash
./matrizproc 10 sumar   # Suma elementos de cada fila
./matrizproc 10 max     # Encuentra m√°ximo de cada fila
```

## üî® Compilaci√≥n

### Compilaci√≥n Manual

```bash
# Compilar matrizsum
gcc -o matrizsum "Parte 1: matrizsum.c" -Wall

# Compilar ejecutor
gcc -o ejecutor "Parte 1: ejecutor.c" -Wall

# Compilar matrizproc (requiere pthread)
gcc -o matrizproc "Parte 2: matrizproc.c" -pthread -Wall
```

### Compilaci√≥n con Makefile

Crea un archivo `Makefile` con el siguiente contenido:

```makefile
CC = gcc
CFLAGS = -Wall -g
PTHREAD_FLAG = -pthread

all: matrizsum ejecutor matrizproc

matrizsum: "Parte 1: matrizsum.c"
	$(CC) $(CFLAGS) -o matrizsum "Parte 1: matrizsum.c"

ejecutor: "Parte 1: ejecutor.c"
	$(CC) $(CFLAGS) -o ejecutor "Parte 1: ejecutor.c"

matrizproc: "Parte 2: matrizproc.c"
	$(CC) $(CFLAGS) $(PTHREAD_FLAG) -o matrizproc "Parte 2: matrizproc.c"

clean:
	rm -f matrizsum ejecutor matrizproc

run-test:
	@echo "=== Prueba matrizsum ==="
	./matrizsum 8 4
	@echo "\n=== Prueba ejecutor ==="
	./ejecutor 6 3
	@echo "\n=== Prueba matrizproc (sumar) ==="
	./matrizproc 10 sumar
	@echo "\n=== Prueba matrizproc (max) ==="
	./matrizproc 10 max

.PHONY: all clean run-test
```

Luego ejecuta:
```bash
make all        # Compila todos los programas
make run-test   # Ejecuta pruebas b√°sicas
make clean      # Limpia los ejecutables
```

## ‚öôÔ∏è Configuraci√≥n Importante

### ‚úÖ CONFIGURACI√ìN ACTUAL - matrizproc.c

El archivo `"Parte 2: matrizproc.c"` est√° **CORRECTAMENTE CONFIGURADO** para el **Grupo 7**:

```c
int p = 9;  // Configurado: p = 7 + 2 = 9 hilos
```

**Configuraci√≥n por Grupo**:
- Grupo 1: `int p = 3;` (3 hilos)
- Grupo 2: `int p = 4;` (4 hilos)
- Grupo 3: `int p = 5;` (5 hilos)
- Grupo 4: `int p = 6;` (6 hilos)
- Grupo 5: `int p = 7;` (7 hilos)
- Grupo 6: `int p = 8;` (8 hilos)
- **Grupo 7: `int p = 9;` (9 hilos)** ‚úÖ **ACTUAL**

## üß™ Casos de Prueba

### Test 1: Validaci√≥n de Argumentos
```bash
# Debe mostrar error - falta argumentos
./matrizsum 8

# Debe mostrar error - n no divide a m
./matrizsum 10 3

# Debe funcionar correctamente
./matrizsum 12 4
```

### Test 2: Diferentes Tama√±os de Matriz
```bash
# Matriz peque√±a
./matrizsum 4 2
./matrizproc 4 sumar

# Matriz mediana
./matrizsum 16 4
./matrizproc 16 max

# Matriz grande
./matrizsum 100 10
./matrizproc 100 sumar
```

### Test 3: Verificaci√≥n de exec()
```bash
# Debe ejecutar matrizsum correctamente
./ejecutor 8 2
./ejecutor 12 6
```

## üìä Salida Esperada

### matrizsum - Ejemplo de Salida
```
Matriz original (8x8):
  1   2   3   4   5   6   7   8 
  2   3   4   5   6   7   8   9 
  3   4   5   6   7   8   9  10 
  4   5   6   7   8   9  10  11 
  5   6   7   8   9  10  11  12 
  6   7   8   9  10  11  12  13 
  7   8   9  10  11  12  13  14 
  8   9  10  11  12  13  14  15 

Proceso hijo PID=12345 procesando filas 0 a 1
  Fila 0: 1 2 3 4 5 6 7 8 -> Suma = 36 (PID: 12345)
  Fila 1: 2 3 4 5 6 7 8 9 -> Suma = 44 (PID: 12345)
...
```

### matrizproc - Ejemplo de Salida (sumar)
```
Matriz original (4x4):
  1   2   0   0 
  1   1   3   4 
  2   1   1   0 
  0   0   0   3 

Procesando con 5 hilos, operaci√≥n: sumar
----------------------------------------
Hilo 0 procesando filas 0 a 0
Fila 0:   1   2   0   0  -> Suma: 3
Hilo 1 procesando filas 1 a 1
Fila 1:   1   1   3   4  -> Suma: 9
...
```

## üêõ Soluci√≥n de Problemas Comunes

### Problema 1: "Permission denied" al ejecutar
```bash
# Soluci√≥n: Dar permisos de ejecuci√≥n
chmod +x matrizsum ejecutor matrizproc
```

### Problema 2: "undefined reference to pthread_create"
```bash
# Soluci√≥n: Asegurar que se incluye -pthread al compilar
gcc -o matrizproc matrizproc.c -pthread
```

### Problema 3: "Segmentation fault"
- Verificar que los argumentos sean n√∫meros positivos
- Asegurar que n sea divisor de m en matrizsum
- Verificar la asignaci√≥n de memoria

### Problema 4: ejecutor no encuentra matrizsum
```bash
# Asegurar que matrizsum est√° en el directorio actual
ls -la matrizsum

# Si es necesario, usar ruta completa en ejecutor.c
execl("/ruta/completa/matrizsum", "matrizsum", argv[1], argv[2], NULL);
```

## üìà An√°lisis de Rendimiento

### Comparaci√≥n Procesos vs Hilos

| Aspecto | Procesos (fork) | Hilos (pthread) |
|---------|-----------------|-----------------|
| **Creaci√≥n** | M√°s costosa | M√°s r√°pida |
| **Memoria** | Espacio separado | Espacio compartido |
| **Comunicaci√≥n** | IPC necesario | Variables compartidas |
| **Overhead** | Mayor | Menor |
| **Aislamiento** | Completo | Ninguno |
| **Seguridad** | Mayor | Menor |

### M√©tricas de Tiempo (Opcional)

Para medir el tiempo de ejecuci√≥n:
```bash
time ./matrizsum 1000 10
time ./matrizproc 1000 sumar
```

## üìù Estructura del Informe

El informe PDF debe incluir:

1. **Portada**
   - Nombre del curso
   - N√∫mero del taller
   - Integrantes del grupo
   - Fecha

2. **Introducci√≥n** (1 p√°gina)
   - Objetivos del taller
   - Conceptos de procesos e hilos

3. **Desarrollo Parte 1** (3-4 p√°ginas)
   - Explicaci√≥n de matrizsum.c
   - Explicaci√≥n de ejecutor.c
   - Diagramas de flujo
   - Capturas de pantalla

4. **Desarrollo Parte 2** (2-3 p√°ginas)
   - Explicaci√≥n de matrizproc.c
   - An√°lisis de distribuci√≥n de trabajo
   - Capturas de pantalla

5. **Resultados y An√°lisis** (2 p√°ginas)
   - Comparaci√≥n procesos vs hilos
   - An√°lisis de eficiencia
   - Casos de prueba ejecutados

6. **Conclusiones** (1 p√°gina)
   - Aprendizajes obtenidos
   - Ventajas y desventajas observadas

7. **Anexos**
   - C√≥digo fuente completo
   - Evidencias adicionales



## üöÄ Scripts de Prueba Automatizados

### Scripts Disponibles

#### 1. `ejecutar_pruebas.sh` - Pruebas Completas con Capturas
```bash
./ejecutar_pruebas.sh
```
- Ejecuta las **29 capturas necesarias** para el informe
- Pausa entre cada prueba para tomar screenshots
- Incluye validaci√≥n de errores, casos exitosos y pruebas de rendimiento
- Muestra el comando antes de ejecutarlo

#### 2. `pruebas_rapidas.sh` - Verificaci√≥n R√°pida
```bash
./pruebas_rapidas.sh
```
- Verificaci√≥n r√°pida sin pausas
- Ideal para comprobar que todo funciona correctamente
- Ejecuta casos b√°sicos de todos los programas

### Archivos de Documentaci√≥n

- **`GUIA_PRUEBAS.md`**: Gu√≠a detallada con todos los casos de prueba
- **`INSTRUCCIONES_CAPTURAS.md`**: Instrucciones paso a paso para las capturas

### Ejecuci√≥n Recomendada

1. **Verificaci√≥n inicial**:
   ```bash
   ./pruebas_rapidas.sh
   ```

2. **Capturas para el informe**:
   ```bash
   ./ejecutar_pruebas.sh
   ```

3. **Comandos individuales** (consultar `INSTRUCCIONES_CAPTURAS.md`)

## üì¶ Entrega Final

### Archivos Requeridos
```
taller_t12_grupo_7.zip/
‚îú‚îÄ‚îÄ Parte 1: matrizsum.c
‚îú‚îÄ‚îÄ Parte 1: ejecutor.c
‚îú‚îÄ‚îÄ Parte 2: matrizproc.c
‚îú‚îÄ‚îÄ matrizsum (ejecutable)
‚îú‚îÄ‚îÄ ejecutor (ejecutable)
‚îú‚îÄ‚îÄ matrizproc (ejecutable)
‚îú‚îÄ‚îÄ ejecutar_pruebas.sh
‚îú‚îÄ‚îÄ pruebas_rapidas.sh
‚îú‚îÄ‚îÄ GUIA_PRUEBAS.md
‚îú‚îÄ‚îÄ INSTRUCCIONES_CAPTURAS.md
‚îú‚îÄ‚îÄ informe.pdf
‚îî‚îÄ‚îÄ README.md
```

### Comando para Empaquetar
```bash
# Crear directorio de entrega
mkdir entrega_final
cp "Parte 1: matrizsum.c" "Parte 1: ejecutor.c" "Parte 2: matrizproc.c" entrega_final/
cp *.md *.sh informe.pdf entrega_final/
cp matrizsum ejecutor matrizproc entrega_final/

# Comprimir
zip -r taller_t12_grupo_7.zip entrega_final/
# o
tar -czf taller_t12_grupo_7.tar.gz entrega_final/
```

## üë• Autores

- Grupo: 7
- Integrantes:
  - Santos Alejandro Arellano Olarte
  - Jeison Camilo Alfonso Moreno
  - Jose Villaroel

## üìÖ Fecha de Entrega

[Fecha seg√∫n lo indicado en la plataforma]

## üìö Referencias

- Manual de fork(): `man 2 fork`
- Manual de exec(): `man 3 exec`
- Manual de pthread: `man 7 pthreads`
- Documentaci√≥n de GCC: https://gcc.gnu.org/onlinedocs/
- POSIX Threads Programming: https://computing.llnl.gov/tutorials/pthreads/

## üìÑ Licencia

Este proyecto es parte del curso de Sistemas Operativos y es solo para fines educativos.

